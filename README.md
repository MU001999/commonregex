CommonRegEx, single-file

### TODO
* Optimize redundant calculations
* fix bugs